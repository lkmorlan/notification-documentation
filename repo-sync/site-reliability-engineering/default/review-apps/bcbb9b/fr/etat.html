<!DOCTYPE html>
<html lang="fr-CA">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Obtenir l’état du message | Notification GC</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="shortcut icon" href="https://notification.canada.ca/static/images/favicon.ico">
    <meta name="description" content="Intégration directe à l`API Notification GC">
    <meta charset="utf-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/assets/css/0.styles.19ee18b5.css" as="style"><link rel="preload" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/assets/js/app.68f76a61.js" as="script"><link rel="preload" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/assets/js/3.1b1897ca.js" as="script"><link rel="preload" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/assets/js/2.d0b1196e.js" as="script"><link rel="preload" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/assets/js/26.9bf85283.js" as="script"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/assets/js/10.dac5c739.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/assets/js/11.2b3b1d3c.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/assets/js/12.955d99c1.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/assets/js/13.42fc9691.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/assets/js/14.7a4a19b2.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/assets/js/15.b9ad3e7e.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/assets/js/16.444a6cfa.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/assets/js/17.74bd9318.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/assets/js/18.448f4b96.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/assets/js/19.b0bfd17b.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/assets/js/20.a0dbfe76.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/assets/js/21.0e7ec412.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/assets/js/22.5f464b2f.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/assets/js/23.6abfecb5.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/assets/js/24.b9a62022.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/assets/js/25.acc12fb4.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/assets/js/27.aa8eee99.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/assets/js/28.ef92634a.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/assets/js/29.65cd3090.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/assets/js/4.f1c02891.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/assets/js/5.23bd546a.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/assets/js/6.32886ebf.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/assets/js/7.85b49c97.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/assets/js/8.8e22a14c.js"><link rel="prefetch" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/assets/js/9.225e9be1.js">
    <link rel="stylesheet" href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/assets/css/0.styles.19ee18b5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/fr/" class="home-link router-link-active"><img src="https://assets.notification.canada.ca/static/gov-canada-fr.svg" alt="Notification GC" class="logo"> <div class="site-name can-hide">Notification GC</div> <div class="site-subtitle">Documentation API</div></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide nav-links"><div class="nav-item"><a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/en/" class="nav-link">
  English
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/en/" class="nav-link">
  English
</a></div> <!----></nav> <div class="back-to-notify"><a href="https://notification.canada.ca?lang=fr" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Retour à Notification GC
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <ul class="sidebar-links"><li><a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/fr/" aria-current="page" class="sidebar-link">Intégrer l’API</a></li><li><a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/fr/commencer.html" class="sidebar-link">Pour commencer</a></li><li><a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/fr/envoyer.html" class="sidebar-link">Envoyer un message</a></li><li><a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/fr/etat.html" aria-current="page" class="active sidebar-link">Obtenir l’état du message</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/fr/etat.html#etat-du-courriel" class="sidebar-link">État du courriel</a></li><li class="sidebar-sub-header"><a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/fr/etat.html#etat-du-message-texte" class="sidebar-link">État du message texte</a></li><li class="sidebar-sub-header"><a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/fr/etat.html#obtenir-l-etat-d-un-message" class="sidebar-link">Obtenir l’état d’un message</a></li><li class="sidebar-sub-header"><a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/fr/etat.html#obtenir-l-etat-de-plusieurs-messages" class="sidebar-link">Obtenir l’état de plusieurs messages</a></li></ul></li><li><a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/fr/essai.html" class="sidebar-link">Mise à l’essai</a></li><li><a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/fr/cles.html" class="sidebar-link">Clés API</a></li><li><a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/fr/limites.html" class="sidebar-link">Limites</a></li><li><a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/fr/rappel.html" class="sidebar-link">Fonctions de rappel</a></li><li><a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/fr/architecture.html" class="sidebar-link">Architecture API</a></li><li><a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/fr/clients.html" class="sidebar-link">Bibliothèques client</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="obtenir-l-etat-du-message"><a href="#obtenir-l-etat-du-message" class="header-anchor">#</a> Obtenir l’état du message</h1> <p>Vous pouvez utiliser l’API Notification GC pour récupérer l’état d’un ou de plusieurs messages.</p> <p>L’état du message dépend du type de message que vous avez envoyé.</p> <p>Vous ne pouvez obtenir que l’état des messages qui ont été envoyés durant les 7 derniers jours. La retention des données peut être configurée pour être entre 3 et 90 jours, soit au niveau du service, soit au niveau de la notification.</p> <h2 id="etat-du-courriel"><a href="#etat-du-courriel" class="header-anchor">#</a> État du courriel</h2> <table><thead><tr><th style="text-align:left;">État</th> <th style="text-align:left;">Renseignements</th></tr></thead> <tbody><tr><td style="text-align:left;">Créé</td> <td style="text-align:left;">Notification GC a placé le message dans une file d’attente, prêt à être envoyé au fournisseur. Il ne doit rester dans cet état que quelques secondes.</td></tr> <tr><td style="text-align:left;">Envoi en cours</td> <td style="text-align:left;">Notification GC a envoyé le message au fournisseur. Le fournisseur essaiera d’envoyer le message au destinataire pendant une période maximale de 72 heures. Notification GC attend les renseignements de livraison.</td></tr> <tr><td style="text-align:left;">Livraison réussie</td> <td style="text-align:left;">Le message a été livré avec succès.</td></tr> <tr><td style="text-align:left;">Échec</td> <td style="text-align:left;">Ce champ couvre tous les états d’échec : <br>- <code>permanent-failure</code> – &quot;Le fournisseur n’a pas pu envoyer le message, car l’adresse de courriel était inexacte. Vous devez supprimer ces adresses de courriel de votre base de données.&quot;<br>- <code>temporary-failure</code> - &quot;Le fournisseur n’a pas pu envoyer le message. Cela peut se produire lorsque la boîte de réception du destinataire est pleine. Vous pouvez essayer de renvoyer le message.&quot;<br>- <code>technical-failure</code> - &quot;Votre message n’a pas été envoyé, car il y a un problème entre Notification GC et le fournisseur.<br>Vous devrez essayer de renvoyer vos messages.&quot;</td></tr></tbody></table> <h2 id="etat-du-message-texte"><a href="#etat-du-message-texte" class="header-anchor">#</a> État du message texte</h2> <table><thead><tr><th style="text-align:left;">État</th> <th style="text-align:left;">Renseignements</th></tr></thead> <tbody><tr><td style="text-align:left;">Créé</td> <td style="text-align:left;">Notification GC a placé le message dans une file d’attente, prêt à être envoyé au fournisseur. Il ne doit rester dans cet état que quelques secondes.</td></tr> <tr><td style="text-align:left;">Envoi en cours</td> <td style="text-align:left;">Notification GC a envoyé le message au fournisseur. Le fournisseur essaiera d’envoyer le message au destinataire pendant une période maximale de 72 heures. Notification GC attend les renseignements de livraison.</td></tr> <tr><td style="text-align:left;">En attente</td> <td style="text-align:left;">Notification GC attend plus de renseignements sur la livraison.<br>Notification GC a reçu un rappel du fournisseur, mais l’appareil du destinataire n’a pas encore répondu. Un autre rappel du fournisseur détermine l’état final de la notification.</td></tr> <tr><td style="text-align:left;">Envoyé / Envoyé à l’international</td> <td style="text-align:left;">Le message a été envoyé à un numéro international. Dans certains pays, les réseaux mobiles ne fournissent plus de renseignements sur la livraison. L’API client Notification GC renvoie cet état comme étant <code>sent</code>. L’application cliente Notification GC retourne cet état comme <code>Sent to an international number</code>.</td></tr> <tr><td style="text-align:left;">Livraison réussie</td> <td style="text-align:left;">Le message a été livré avec succès.</td></tr> <tr><td style="text-align:left;">Échec</td> <td style="text-align:left;">Ce champ couvre tous les états d’échec : <br>- <code>permanent-failure</code> – &quot;Le fournisseur n’a pas pu envoyer le message. Cela peut se produire si le numéro de téléphone était inexact ou si l’opérateur réseau rejette le message. Si vous êtes certain que ces numéros de téléphone sont exacts, vous devriez <a href="https://notification.canada.ca/contact?lang=fr" target="_blank" rel="noopener noreferrer">communiquer avec nous<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Dans le cas contraire, vous devez les supprimer de votre base de données. Vous serez toujours facturé pour les messages texte qui ne peuvent pas être livrés.&quot;<br>- <code>temporary-failure</code> - &quot;Le fournisseur n’a pas pu livrer le message. Cela peut se produire lorsque le téléphone du destinataire est éteint, qu’il n’a pas de signal ou que sa boîte de réception de message texte est pleine. Vous pouvez essayer de renvoyer le message. On vous facturera quand même les messages texte aux téléphones qui ne reçoivent pas de messages.&quot;<br>- <code>technical-failure</code> - &quot;Votre message n’a pas été envoyé, car il y a un problème entre Notification GC et le fournisseur.<br>Vous devrez essayer de renvoyer vos messages. Vous ne serez pas facturé pour les messages texte touchés par une défaillance technique.&quot;</td></tr></tbody></table> <h2 id="obtenir-l-etat-d-un-message"><a href="#obtenir-l-etat-d-un-message" class="header-anchor">#</a> Obtenir l’état d’un message</h2> <p>Vous pouvez utiliser l’API de Notification GC pour obtenir un état de message unique.</p> <div class="language- extra-class"><pre class="language-text"><code>GET /v2/notifications/{notification_id}
</code></pre></div><h3 id="parametres-de-requete"><a href="#parametres-de-requete" class="header-anchor">#</a> Paramètres de requête</h3> <h4 id="notification-id-obligatoire"><a href="#notification-id-obligatoire" class="header-anchor">#</a> notification_id (obligatoire)</h4> <p>L’ID de la notification. Vous pouvez trouver l’ID de notification dans la réponse à l’appel de méthode de notification initiale.</p> <p>Vous pouvez également le trouver en <a href="https://notification.canada.ca/sign-in?lang=fr" target="_blank" rel="noopener noreferrer">vous connectant à Notification GC<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> et en accédant à la page <strong>Integration API</strong>.</p> <p>Vous pouvez filtrer les messages retournés en incluant les paramètres facultatifs suivants dans l’adresse URL :</p> <ul><li><code>template_type</code></li> <li><code>status</code></li> <li><code>reference</code></li> <li><code>older_than</code></li></ul> <h3 id="reponse"><a href="#reponse" class="header-anchor">#</a> Réponse</h3> <p>Si la demande est acceptée, le corps de la réponse est <code>json</code> et le code d’état est <code>200</code> :</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;740e5834-3a29-46b4-9a6f-16142fde533a&quot;</span><span class="token punctuation">,</span> # chaîne obligatoire – ID de notification
  <span class="token property">&quot;reference&quot;</span><span class="token operator">:</span> <span class="token string">&quot;STRING&quot;</span><span class="token punctuation">,</span> # chaîne facultative
  <span class="token property">&quot;email_address&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;expéditeur@quelquechose.com&quot;</span><span class="token punctuation">,</span> # chaîne obligatoire pour les courriels
  <span class="token property">&quot;phone_number&quot;</span><span class="token operator">:</span> <span class="token string">&quot;+447900900123&quot;</span><span class="token punctuation">,</span>  # chaîne obligatoire pour les messages texte
  <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;email / sms&quot;</span><span class="token punctuation">,</span> # chaîne obligatoire
  <span class="token property">&quot;status&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;sending / delivered / permanent-failure / temporary-failure / technical-failure&quot;</span><span class="token punctuation">,</span> # chaîne obligatoire
  <span class="token property">&quot;provider_response&quot;</span><span class="token operator">:</span> <span class="token string">&quot;STRING&quot;</span><span class="token punctuation">,</span> # chaîne facultative - ne sera pas nulle si seulement le statut est une erreur technique
  <span class="token property">&quot;template&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;Version&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;f33517ff-2a88-4f6e-b855-c550268ce08a&quot;</span> # chaîne obligatoire – ID de modèle
    <span class="token property">&quot;uri&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/v2/template/{id}/{version}&quot;</span><span class="token punctuation">,</span> # obligatoire
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;body&quot;</span><span class="token operator">:</span> <span class="token string">&quot;STRING&quot;</span><span class="token punctuation">,</span> # chaîne obligatoire – corps de la notification
  <span class="token property">&quot;subject&quot;</span><span class="token operator">:</span> <span class="token string">&quot;STRING&quot;</span> # chaîne obligatoire pour le courriel – objet du courriel
  <span class="token property">&quot;created_at&quot;</span><span class="token operator">:</span> <span class="token string">&quot;STRING&quot;</span><span class="token punctuation">,</span> # chaîne obligatoire – date et heure de création de la notification
  <span class="token property">&quot;created_by_name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;STRING&quot;</span><span class="token punctuation">,</span> # chaîne facultative – nom de la personne qui a envoyé la notification si elle est envoyée manuellement
  <span class="token property">&quot;sent_at&quot;</span><span class="token operator">:</span> <span class="token string">&quot;STRING&quot;</span><span class="token punctuation">,</span> # chaîne facultative – date et heure d’envoi de la notification au fournisseur
  <span class="token string">&quot;completed_at :&quot;</span> <span class="token string">&quot;STRING&quot;</span> # chaîne facultative – date et heure de remise ou d’échec de la notification
<span class="token punctuation">}</span>
</code></pre></div><h3 id="codes-d-erreur"><a href="#codes-d-erreur" class="header-anchor">#</a> Codes d’erreur</h3> <p>Si la demande a été refusée, le corps de la réponse est <code>json</code>, consultez le tableau ci-dessous pour plus de détails.</p> <table><thead><tr><th style="text-align:left;">status_code</th> <th style="text-align:left;">message</th> <th style="text-align:left;">Comment réparer</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>400</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;ValidationError&quot;,</code><br><code>&quot;message&quot;: &quot;id is not a valid UUID&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Vérifiez l’ID de notification</td></tr> <tr><td style="text-align:left;"><code>403</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;AuthError&quot;,</code><br><code>&quot;message&quot;: &quot;Error: Your system clock must be accurate to within 30 seconds&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Vérifiez votre horloge système</td></tr> <tr><td style="text-align:left;"><code>403</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;AuthError&quot;,</code><br><code>&quot;message&quot;: &quot;Invalid token: API key not found&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Utilisez la bonne <a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/fr/cles.html">clé API</a></td></tr> <tr><td style="text-align:left;"><code>404</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;NoResultFound&quot;,</code><br><code>&quot;message&quot;: &quot;No result found&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Vérifiez l’ID de notification</td></tr></tbody></table> <h2 id="obtenir-l-etat-de-plusieurs-messages"><a href="#obtenir-l-etat-de-plusieurs-messages" class="header-anchor">#</a> Obtenir l’état de plusieurs messages</h2> <p>Vous pouvez utiliser l’API de Notification GC pour rechercher simultanément l’état de plusieurs messages.</p> <p>Cet appel d’API renvoie une page d’un maximum de 250 messages et états. Vous pouvez obtenir les messages les plus récents ou obtenir des messages plus anciens en indiquant un ID de notification particulier dans l’argument <code>older_than</code>.</p> <p>Vous ne pouvez obtenir que l’état des messages qui ont été envoyés durant les 7 derniers jours. La retention des données peut être configurée pour être entre 3 et 90 jours, soit au niveau du service, soit au niveau de la notification.</p> <div class="language- extra-class"><pre class="language-text"><code>GET /v2/notifications
</code></pre></div><h4 id="tous-les-messages"><a href="#tous-les-messages" class="header-anchor">#</a> Tous les messages</h4> <p>Cela retournera tous vos messages avec des états. Chaque page contiendra jusqu’à 250 messages.</p> <p>Vous pouvez filtrer les messages retournés en incluant les arguments facultatifs suivants dans l’adresse URL :</p> <ul><li><code>template_type</code></li> <li><code>status</code></li> <li><code>reference</code></li> <li><code>older_than</code></li></ul> <h3 id="arguments"><a href="#arguments" class="header-anchor">#</a> Arguments</h3> <p>Vous pouvez omettre n’importe lequel de ces arguments pour ignorer ces filtres.</p> <h4 id="type-de-gabarit-facultatif"><a href="#type-de-gabarit-facultatif" class="header-anchor">#</a> Type de gabarit (facultatif)</h4> <p>Si vous spécifiez le filtre <code>template_type</code>, vous pouvez filtrer par :</p> <ul><li><code>email</code></li> <li><code>sms</code></li></ul> <h3 id="etat-facultatif"><a href="#etat-facultatif" class="header-anchor">#</a> État (facultatif)</h3> <p>Si vous spécifiez le filtre <code>status</code>, vous pouvez filtrer par chaque :</p> <ul><li>état du courriel</li> <li>état du message texte</li></ul> <p>Vous pouvez ignorer cet argument pour ignorer ce filtre.</p> <h4 id="reference-facultatif"><a href="#reference-facultatif" class="header-anchor">#</a> Référence (facultatif)</h4> <p>Si vous spécifiez le filtre <code>reference</code>, vous pouvez filtrer les résultats par la valeur <code>reference</code>, un identificateur que vous pouvez créer au besoin lors de l'envoi des notifications. Cette référence identifie une seule notification ou un lot de notifications. Il ne doit contenir aucun renseignement personnel comme le nom ou l’adresse postale. Par exemple :</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;reference&quot;</span><span class="token operator">:</span> <span class="token string">&quot;STRING&quot;</span>
</code></pre></div><h4 id="plus-ancien-que-facultatif"><a href="#plus-ancien-que-facultatif" class="header-anchor">#</a> Plus ancien que (facultatif)</h4> <p>Si vous spécifiez le filtre <code>older_than</code>, la méthode renvoie les 250 notifications reçues plus anciennes que l’ID de notification donné.</p> <div class="language- extra-class"><pre class="language-text"><code>&quot;older_than&quot;:&quot;740e5834-3a29-46b4-9a6f-16142fde533a&quot;
</code></pre></div><p>Si vous ignorez cet argument, la méthode renvoie les 250 notifications les plus récentes.</p> <p>Le client ne retourne que les notifications envoyées lors des 7 derniers jours. Si la notification indiquée dans cet argument a été envoyée il y a plus de 7 jours, le client renvoie une réponse vide.</p> <h3 id="reponse-2"><a href="#reponse-2" class="header-anchor">#</a> Réponse</h3> <p>Si la demande est acceptée, le corps de la réponse est <code>json</code> et le code d’état est <code>200</code>.</p> <h4 id="tous-les-messages-2"><a href="#tous-les-messages-2" class="header-anchor">#</a> Tous les messages</h4> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;notifications&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;740e5834-3a29-46b4-9a6f-16142fde533a&quot;</span><span class="token punctuation">,</span> # chaîne obligatoire – ID de notification
      <span class="token property">&quot;référence&quot;</span><span class="token operator">:</span> <span class="token string">&quot;STRING&quot;</span><span class="token punctuation">,</span> # chaîne facultative – référence client
      <span class="token property">&quot;email_address&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;expéditeur@quelquechose.com&quot;</span><span class="token punctuation">,</span> # chaîne obligatoire pour les courriels
      <span class="token property">&quot;phone_number&quot;</span><span class="token operator">:</span> <span class="token string">&quot;+447900900123&quot;</span><span class="token punctuation">,</span>  # chaîne obligatoire pour les messages texte
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;email / sms&quot;</span><span class="token punctuation">,</span> # chaîne obligatoire
      <span class="token property">&quot;status&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;sending / delivered / permanent-failure / temporary-failure / technical-failure&quot;</span><span class="token punctuation">,</span> # chaîne obligatoire
      <span class="token property">&quot;provider_response&quot;</span><span class="token operator">:</span> <span class="token string">&quot;STRING&quot;</span><span class="token punctuation">,</span> # chaîne facultative - ne sera pas nulle si seulement le statut est une erreur technique
      <span class="token property">&quot;template&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
        <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> 'f33517ff-2a88-4f6e-b855-c550268ce08a' # chaîne obligatoire – ID de modèle
        <span class="token property">&quot;uri&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/v2/template/{id}/{version}&quot;</span><span class="token punctuation">,</span> # obligatoire
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;body&quot;</span><span class="token operator">:</span> <span class="token string">&quot;STRING&quot;</span><span class="token punctuation">,</span> # chaîne obligatoire – corps de la notification
      <span class="token property">&quot;subject&quot;</span><span class="token operator">:</span> <span class="token string">&quot;STRING&quot;</span> # chaîne obligatoire pour le courriel – objet du courriel
      <span class="token property">&quot;created_at&quot;</span><span class="token operator">:</span> <span class="token string">&quot;STRING&quot;</span><span class="token punctuation">,</span> # chaîne obligatoire – date et heure de création de la notification
      <span class="token property">&quot;created_by_name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;STRING&quot;</span><span class="token punctuation">,</span> # chaîne facultative – nom de la personne qui a envoyé la notification si elle est envoyée manuellement
      <span class="token property">&quot;sent_at&quot;</span><span class="token operator">:</span> <span class="token string">&quot;STRING&quot;</span><span class="token punctuation">,</span> # chaîne facultative – date et heure d’envoi de la notification au fournisseur
      <span class="token string">&quot;completed_at :&quot;</span> <span class="token string">&quot;STRING&quot;</span> # chaîne facultative – date et heure de livraison ou d’échec de la notification
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    …
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;links&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;current&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/notifications?template_type=sms&amp;status=delivered&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;next&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/notifications?other_than=last_id_in_list&amp;template_type=sms&amp;status=delivered&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="codes-d-erreur-2"><a href="#codes-d-erreur-2" class="header-anchor">#</a> Codes d’erreur</h3> <p>Si la demande a été refusée, le corps de la réponse est <code>json</code>, consultez le tableau ci-dessous pour plus de détails.</p> <table><thead><tr><th style="text-align:left;">status_code</th> <th style="text-align:left;">message</th> <th style="text-align:left;">Comment réparer</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>400</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;ValidationError&quot;,</code><br><code>&quot;message&quot;: &quot;id is not a valid UUID&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Vérifiez l’ID de notification</td></tr> <tr><td style="text-align:left;"><code>403</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;AuthError&quot;,</code><br><code>&quot;message&quot;: &quot;Error: Your system clock must be accurate to within 30 seconds&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Vérifiez votre horloge système</td></tr> <tr><td style="text-align:left;"><code>403</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;AuthError&quot;,</code><br><code>&quot;message&quot;: &quot;Invalid token: API key not found&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Utilisez la bonne <a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/fr/cles.html">clé API</a></td></tr> <tr><td style="text-align:left;"><code>404</code></td> <td style="text-align:left;"><code>[{</code><br><code>&quot;error&quot;: &quot;NoResultFound&quot;,</code><br><code>&quot;message&quot;: &quot;No result found&quot;</code><br><code>}]</code></td> <td style="text-align:left;">Vérifiez l’ID de notification</td></tr></tbody></table></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/cds-snc/notification-documentation/edit/main/src/fr/etat.md" target="_blank" rel="noopener noreferrer">Modifier cette page sur GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Dernière mise à jour :</span> <span class="time">2023-01-13</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/fr/envoyer.html" class="prev">
        Envoyer un message
      </a></span> <span class="next"><a href="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/fr/essai.html">
        Mise à l’essai
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/assets/js/app.68f76a61.js" defer></script><script src="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/assets/js/3.1b1897ca.js" defer></script><script src="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/assets/js/2.d0b1196e.js" defer></script><script src="/notification-documentation/repo-sync/site-reliability-engineering/default/review-apps/bcbb9b/assets/js/26.9bf85283.js" defer></script>
  </body>
</html>
